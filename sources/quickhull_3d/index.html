<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Demo TER</title>
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<style>
		body
		{
			background-color: black;
			margin: 0;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}
		main
		{
			width: 500px;
		}
		input#timeline
		{
			width: calc(100% - 10px);
			margin: 5px;
		}
	</style>
</head>

<body>
	<main>
		<canvas width="500" height="500"></canvas>
		<input type="range" id="timeline">
	</main>
</body>

<script src="vertex_list.js"></script>
<script src="3d_trigo.js"></script>
<script type="text/javascript">
	"use strict";
	// ------------- Génération de points aléatoires -------------
	for (let i = 0; i < 1000; i++)
	{
		GLOBAL_V_LIST.push(
			multiply3_1(
				normalize3(
					minus3_1(
						vec3(
							Math.random(),
							Math.random(),
							Math.random()
						),
						.5
					)
				),
				Math.cbrt(Math.random())//*0 + 1
			)
		);
	}
</script>
<script src="wgl.js"></script>
<script src="display.js"></script>
<script src="structures.js"></script>
<script src="3d_quickhull.js"></script>
<script type="text/javascript">
	"use strict";

	let GLOBAL_DISP = new display(
		document.getElementsByTagName("canvas")[0],
		document.getElementById("timeline")
	);
	GLOBAL_DISP.init_vertex_list(GLOBAL_V_LIST);

	// ------------- Exécution -------------
	let convex_hull = quick_hull_3d(GLOBAL_V_LIST);

	// console.table(convex_hull);
	// convex_hull = remove_face(convex_hull, convex_hull[0]);
	// convex_hull = remove_face(convex_hull, convex_hull[3]);
	// convex_hull = remove_face(convex_hull, convex_hull[6]);
	// convex_hull = remove_face(convex_hull, convex_hull[9]);
	// console.table(convex_hull);

	let result = [];
	he_for_each_faces(
		convex_hull,
		he_i =>
			he_for_each_vertices(
				convex_hull,
				he_i,
				(x,y,z) => result.push(x,y,z)
			)
		)
	;

	GLOBAL_DISP.push_result_indices(result);
	GLOBAL_DISP.set_ready();
	GLOBAL_DISP.new_frame();
	GLOBAL_DISP.autoplay();

</script>

</html>